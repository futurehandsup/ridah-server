<% include ../templates/head.ejs %>

<section>
  <div class="container-fluid">
    <p class="mb-3 subtitle">프로그램을 간편하게 등록하고 관리할 수 있습니다</p>
  </div>

  <div class="card" style="margin-bottom: 20px;">
    <table class="table table-default table-hover table-striped">
      <thead>
        <th>번호</th>

        <th>프로그램명</th>
        <th>프로그램 한줄설명</th>
        <th>가격</th>
        <th>제공가격</th>
        <th>할인율</th>
        <th>소요시간</th>
        <th>요구등급</th>
        <th>안내사항</th>
        <th>코치정보</th>
        <th>준비물</th>
        <th>등록일자</th>
        <th>최종수정일자</th>
        <th>노출여부</th>
        <th>마감일</th>
        <th>찜한갯수</th>
        <th>리뷰</th>
      </thead>
      <tbody>
        <% %>
        <% for(var i=0; i<programs.length; i++){
          var program = programs[i];
          %>
          <tr>
            <td><%=(i+1)%></td>

            <td><%=program.programName%></td>
            <td><%=program.programDescription%></td>
            <td><%=program.programOriginalPrice%></td>
            <td><%=program.programPrice%></td>
            <td><%=program.programDiscountRatio%></td>
            <td><%=program.programTime%></td>
            <td><%=program.requiredLevelMin%>~<%=program.requiredLevelMax%></td>
            <td><%=program.programInfo%></td>
            <td><%=program.coachName%></td>
            <td><%=program.programNeeds%></td>
            <td><%=moment(program.createDate).format("YYYY-MM-DD")%></td>
            <td><%=program.updateDate%></td>
            <td><%=program.showYn%></td>
            <td><%=program.endDate%></td>
            <td><%=program.zzimCount%></td>
            <td><%=program.reviewCount%>개/<%=program.reviewScore%></td>

          </tr>
        <% }%>
      </tbody>
    </table>
  </div>

  <div class="card">
    <div class="card-body">
      <button type="button" name="button">프로그램 추가</button>
    </div>
  </div>
</section>

<% include ../templates/bottom.ejs %>

<script>
  $(document).ready(function(){
  $('#saveButton').click(function(){
    var program =  $('#infoForm').serializeObject();
    $.ajax({
      type:"PUT",
      url:'/programs/<%=program.id%>',
      data:program,
      success:function(args){
        alert("성공했습니다.");
        location.reload();
      },
      error:function(e){
          alert(e.responseText);
      }
    });
  });
});
</script>

<script type="text/javascript">

  function goBack(){
    window.history.back();
  }

</script>
